<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" type="text/css" href="/css/default.css" />
        <link rel="stylesheet" type="text/css" href="/css/post.css" />
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
        <script type="text/javascript">
        $(document).ready(function() {
            /* 生成目录 */
            // 创建目录
            var contentTableEle = document.createElement("div");
            var tmpEle = document.createElement("p");
            tmpEle.innerHTML = "目录";
            contentTableEle.appendChild(tmpEle);

            var identifier = "section";
            var firstLevelNum = 1;
            var loopID = identifier + "_" + firstLevelNum;
            var loopEle = document.getElementById(loopID);
            while (loopEle) {
                // 创建一级标题目录
                tmpEle = document.createElement("a");
                tmpEle.setAttribute("href", "#" + loopID);
                tmpEle.innerHTML = loopEle.innerHTML;
                contentTableEle.appendChild(tmpEle);
                // 换行
                var br = document.createElement("br");
                contentTableEle.appendChild(br);

                var secondLevelNum = 1;
                var innerLoopID = loopID + "_" + secondLevelNum;
                var innerLoopEle = document.getElementById(innerLoopID);
                while (innerLoopEle) {
                    // 创建二级标题目录
                    tmpEle = document.createElement("a");
                    tmpEle.setAttribute("href", "#" + innerLoopID);
                    tmpEle.innerHTML = innerLoopEle.innerHTML;
                    contentTableEle.appendChild(tmpEle);
                    // 换行
                    br = document.createElement("br");
                    contentTableEle.appendChild(br);

                    secondLevelNum++;
                    innerLoopID = loopID + "_" + secondLevelNum;
                    innerLoopEle = document.getElementById(innerLoopID);
                }

                firstLevelNum++;
                loopID = identifier + "_" + firstLevelNum;
                loopEle = document.getElementById(loopID);
            }

            // 插入到标题后面
            var titleEle = document.querySelectorAll(".title");
            if (titleEle.length > 0) {
                titleEle = titleEle[0];
                titleEle.parentNode.insertBefore(contentTableEle, titleEle.nextSibling);
            }
        });
        </script>
        <title>{{ page.title }}</title>
    </head>
    <body>
        <div class="header"></div>

        <div class="main">
        {{ content }}

        <div class="comment">
        <div id="disqus_thread"></div>
        <script>
            /**
            * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
            */
            /*
            var disqus_config = function () {
            this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            */
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//jamchenjun.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
        </div><!-- comment -->
        </div><!-- main -->

        <div class="footer">
            <p>powered by github</p>
        </div>
    </body>
</html>

